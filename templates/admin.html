{% extends "layout.html" %}

{% block title %}–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞{% endblock %}

{% block content %}

<h2>üë®‚Äçüíª –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h2>
<a href="{{ url_for('app_routes.admin_sql') }}" class="btn btn-warning">üîç SQL-–∑–∞–ø—Ä–æ—Å—ã</a>
<!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ -->
<button class="btn btn-primary" data-toggle="modal" data-target="#addProductModal">–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ–¥—É–∫—Ç</button>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–∞ -->
<div class="modal fade" id="addProductModal" tabindex="-1" role="dialog" aria-labelledby="addProductModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="addProductModalLabel">–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ–¥—É–∫—Ç</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="–ó–∞–∫—Ä—ã—Ç—å">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞ -->
        <form action="{{ url_for('app_routes.add_product') }}" method="POST" enctype="multipart/form-data">
            <div class="form-group">
                <label for="name">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                <input type="text" id="name" name="name" class="form-control" required>
            </div>
            <div class="form-group">
                <label for="description">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                <textarea id="description" name="description" class="form-control" required></textarea>
            </div>
            <div class="form-group">
                <label for="price">–¶–µ–Ω–∞</label>
                <input type="number" id="price" name="price" class="form-control" required step="0.01">
            </div>
            <div class="form-group">
                <label for="stock">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞ —Å–∫–ª–∞–¥–µ</label>
                <input type="number" id="stock" name="stock" class="form-control" required>
            </div>
            <div class="form-group">
                <label for="image">–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</label>
                <input type="file" id="image" name="image" class="form-control">
            </div>
            <button type="submit" class="btn btn-primary">–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–¥—É–∫—Ç</button>
        </form>
      </div>
    </div>
  </div>
</div>

<h3>–ó–∞–∫–∞–∑—ã</h3>
<table class="table">
    <thead>
        <tr>
            <th>#</th>
            <th>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
            <th>–°—Ç–∞—Ç—É—Å</th>
            <th>–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è</th>
            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
        </tr>
    </thead>
    <tbody>
        {% for order in orders %}
        <tr>
            <td>{{ order.id }}</td>
            <td>{{ order.user.username }}</td>
            <td>{{ order.status }}</td>
            <td>{{ order.created_at }}</td>
            <td>
                <a href="{{ url_for('app_routes.view_order', order_id=order.id) }}" class="btn btn-info">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å</a>
                <form action="{{ url_for('app_routes.delete_order', order_id=order.id) }}" method="POST" style="display:inline;">
                    <button type="submit" class="btn btn-danger">–£–¥–∞–ª–∏—Ç—å</button>
                </form>
            </td>
        </tr>
        {% else %}
        <tr>
            <td colspan="5">–ù–µ—Ç –∑–∞–∫–∞–∑–æ–≤ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<h3>–ü—Ä–æ–¥—É–∫—Ç—ã</h3>
<table class="table">
    <thead>
        <tr>
            <th>#</th>
            <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
            <th>–¶–µ–Ω–∞</th>
            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
        </tr>
    </thead>
    <tbody>
        {% for product in products %}
        <tr>
            <td>{{ product.id }}</td>
            <td>{{ product.name }}</td>
            <td>{{ product.price }} —Ä—É–±.</td>
            <td>
                <a href="{{ url_for('app_routes.product_detail_admin', product_id=product.id) }}" class="btn btn-info">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å</a>
                <form action="{{ url_for('app_routes.delete_product', product_id=product.id) }}" method="POST" style="display:inline;">
                    <button type="submit" class="btn btn-danger">–£–¥–∞–ª–∏—Ç—å</button>
                </form>
            </td>
        </tr>
        {% else %}
        <tr>
            <td colspan="4">–ù–µ—Ç –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<h3>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h3>
<table class="table">
    <thead>
        <tr>
            <th>#</th>
            <th>–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</th>
            <th>–†–æ–ª—å</th>
            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
        </tr>
    </thead>
    <tbody>
        {% for user in users %}
        <tr>
            <td>{{ user.id }}</td>
            <td>{{ user.username }}</td>
            <td>{{ user.role }}</td>
            <td>
                <a href="{{ url_for('app_routes.user_detail', user_id=user.id) }}" class="btn btn-info">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å</a>
                <form action="{{ url_for('app_routes.delete_user', user_id=user.id) }}" method="POST" style="display:inline;">
                    <button type="submit" class="btn btn-danger">–£–¥–∞–ª–∏—Ç—å</button>
                </form>
            </td>
        </tr>
        {% else %}
        <tr>
            <td colspan="4">–ù–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% endblock %}
